{"version":3,"file":"js/311.2f88541c.js","mappings":"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","sources":["webpack://bloid-client/./src/views/crud/CrudLet.vue?8c43","webpack://bloid-client/src/views/crud/CrudLet.vue","webpack://bloid-client/./src/views/crud/CrudLet.vue?3ef5","webpack://bloid-client/./src/views/crud/CrudLet.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{attrs:{\"id\":\"modal-crudlet\",\"title\":\"Let\",\"size\":\"lg\",\"ok-disabled\":_vm.thing.name==undefined || _vm.thing.name.length==0,\"ok-variant\":_vm.thing.name==undefined || _vm.thing.name.length==0 ? 'secondary' : 'success'},on:{\"ok\":_vm.save,\"cancel\":_vm.onCancel}},[_c('div',{staticClass:\"scroll\"},[_c('b-checkbox',{attrs:{\"size\":\"sm\",\"disabled\":\"\"}},[_vm._v(\"use wikidata\")]),_vm._l((_vm.thing),function(val,k){return _c('div',{key:k},[(!k.startsWith('@'))?_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('label',{attrs:{\"for\":(\"field-\" + k)}},[_vm._v(_vm._s(k))])]),_c('b-col',{attrs:{\"sm\":\"9\"}},[(Array.isArray(_vm.thing[k]))?_c('div',[_vm._v(\" Multiple\"),_c('br'),_vm._l((_vm.thing[k]),function(v,i){return _c('b-button',{key:i,attrs:{\"size\":\"sm\",\"variant\":_vm.thingVariant(v)}},[_vm._v(_vm._s(v.name || v.text)+\" (\"+_vm._s(v.description)+\")(\"+_vm._s(v['https://www.wikidata.org/wiki/Q3523102'])+\")\")])})],2):_vm._e(),(k == 'name')?_c('b-form-input',{attrs:{\"id\":(\"field-\" + k),\"autofocus\":\"\",\"state\":_vm.thing[k] != null && _vm.thing[k].length>0,\"placeholder\":'{'+k+'}'},model:{value:(_vm.thing[k]),callback:function ($$v) {_vm.$set(_vm.thing, k, $$v)},expression:\"thing[k]\"}}):_c('div',[_c('KTag',{attrs:{\"thing\":_vm.thing,\"k\":k}})],1)],1)],1):_vm._e()],1)})],2),_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"6\"}},[_c('b-form-input',{attrs:{\"id\":\"add_filed\",\"placeholder\":\"new field\",\"size\":\"sm\"},model:{value:(_vm.new_field),callback:function ($$v) {_vm.new_field=$$v},expression:\"new_field\"}})],1),_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('b-form-input',{attrs:{\"placeholder\":\"type\",\"disabled\":\"\",\"size\":\"sm\"}})],1),_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('b-button',{attrs:{\"disabled\":_vm.new_field == null || _vm.new_field.length== 0,\"size\":\"sm\",\"variant\":_vm.new_field == null || _vm.new_field.length == 0? 'secondary' : 'success'},on:{\"click\":_vm.add}},[_vm._v(\"Add field\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-modal id=\"modal-crudlet\" title=\"Let\" size=\"lg\" @ok=\"save\" @cancel=\"onCancel\"\n  :ok-disabled=\"thing.name==undefined || thing.name.length==0\"\n  :ok-variant=\"thing.name==undefined || thing.name.length==0 ? 'secondary' : 'success'\"\n  >\n  <!-- <p class=\"my-4\">Hello from modal! -->\n  <!-- {{createParams}}\n\n  <hr>\n  {{thing}} -->\n  <div class=\"scroll\">\n    <b-checkbox size=\"sm\" disabled  >use wikidata</b-checkbox>\n    <div v-for=\"(val, k) in thing\" :key=\"k\">\n\n      <b-row v-if=\"!k.startsWith('@')\" class=\"my-1\" >\n\n        <b-col sm=\"3\">\n          <label :for=\"`field-${k}`\">{{k}}</label>\n        </b-col>\n        <b-col sm=\"9\">\n\n          <div v-if=\"Array.isArray(thing[k])\" > Multiple<br>\n            <b-button v-for=\"(v , i) in thing[k]\" :key=\"i\" size=\"sm\" :variant=\"thingVariant(v)\">{{v.name || v.text}} ({{v.description}})({{v['https://www.wikidata.org/wiki/Q3523102']}})</b-button>\n          </div>\n          <!-- <div v-else>\n            <b-button size=\"sm\" :variant=\"thingVariant(thing[k])\">{{thing[k]}}</b-button>\n\n          </div> -->\n\n\n\n          <b-form-input v-if=\"k == 'name'\" :id=\"`field-${k}`\" autofocus :state=\"thing[k] != null && thing[k].length>0\" v-model=\"thing[k]\" :placeholder=\"'{'+k+'}'\"></b-form-input>\n\n          <div v-else>\n            <!-- <b-form-input :id=\"`field-${k}`\" v-model=\"thing[k]\" :placeholder=\"'{'+k+'}'\"></b-form-input> -->\n            <KTag :thing=\"thing\" :k=\"k\"/>\n          </div>\n          <!--\n          <b-form-input v-if=\"thing[k].split('^^').length > 0\" :type=\"thing[k].split('^^')[1]\" v-model=\"thing[k].split('^^')[0]\" >\n\n        </b-form-input>\n        <b-form-input v-else :id=\"`field-${k}`\" v-model=\"thing[k]\"></b-form-input> -->\n      </b-col>\n\n\n    </b-row>\n  </div>\n\n</div>\n<b-row class=\"my-1\">\n\n  <b-col sm=\"6\">\n    <b-form-input id=\"add_filed\" v-model=\"new_field\" placeholder=\"new field\" size=\"sm\"></b-form-input>\n  </b-col>\n  <b-col sm=\"3\">\n    <b-form-input placeholder=\"type\" disabled size=\"sm\" />\n  </b-col>\n  <b-col sm=\"3\">\n    <b-button @click=\"add\" :disabled=\"new_field == null || new_field.length== 0\" size=\"sm\" :variant=\"new_field == null || new_field.length == 0? 'secondary' : 'success'\" >Add field</b-button>\n  </b-col>\n\n</b-row>\n\n\n\n\n\n<!-- <b-list-group>\n<b-list-group-item v-for=\"(v, k) in thing\" :key=\"k\">  {{k}} -> {{v}}</b-list-group-item>\n</b-list-group> -->\n\n<!-- <b-row v-for=\"(v, k) in thing\" :key=\"k\" >\n{{k}} -> {{v}}\n</b-row> -->\n<!-- </p> -->\n\n</b-modal>\n</template>\n\n<script>\n\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default {\n  name: \"CrudLet\",\n  components: {\n    'KTag': ()=>import('@/views/crud/KTag'),\n  },\n\n  data() {\n    return {\n      thing: {},\n      new_field: null\n    }\n  },\n  methods: {\n    save(){\n      console.log(\"save \", this.thing)\n      let extraProps = this.$store.state.crud.currentThingExtraProps\n      console.log(extraProps)\n      for (const [key, value] of Object.entries(extraProps)) {\n        console.log(`${key}: ${value}`);\n        let v = this.thing[key]\n        console.log(v)\n        if (v == null || v.length == 0){\n          this.thing[key] = value\n        }else if(Array.isArray(v)){\n          v.push(value)\n        }else{\n          this.thing[key] = [this.thing[key]]\n          this.thing[key].push(value)\n        }\n      }\n      let crud = {action: \"create\", thing: this.thing, start: Date.now()}\n      this.new_field = \"\"\n      this.$io_ld_crud(crud)\n      this.$store.commit('crud/resetCurrentThingExtraProps')\n    },\n    thingVariant(t){\n      let variant = \"outline-secondary\"\n      switch (t['https://www.wikidata.org/wiki/Q3523102']) { // source\n        case 'wikidata':\n        variant = 'outline-success'\n        break;\n        case 'local':\n        variant = 'outline-warnig'\n        break;\n        default:\n        console.log(\"no variant for \", t['https://www.wikidata.org/wiki/Q3523102'])\n      }\n      return variant\n    },\n    onCancel(){\n      console.log(\"todo cancel\")\n    },\n    add(){\n      if(this.new_field.length > 0){\n        this.thing[this.new_field] == undefined ? this.thing[this.new_field] = \"\" :alert(\"already exist\")\n      }\n      console.log(this.thing)\n      this.new_field = \"\"\n    },\n\n  },\n  watch: {\n    createParams() {\n      let template = {\n        \"@context\": {\n          \"@vocab\": \"https://scenaristeur/github.io/bloid/\",\n          \"name\": \"https://www.wikidata.org/wiki/Q82799\",\n          \"type\": \"https://www.wikidata.org/wiki/Q21146257\",\n          \"description\": \"https://www.wikidata.org/wiki/Q1200750\",\n          \"version\": \"https://www.wikidata.org/wiki/Q20826013\",\n          \"creator\": \"https://www.wikidata.org/wiki/Q2500638\",\n          \"source\": \"https://www.wikidata.org/wiki/Q3523102\"\n          //  \"@base\": \"https://www.wikidata.org/wiki/\"\n        },\n        \"@id\": \"{@id}\",\n        \"name\": null,\n        \"type\": null,\n        \"description\": null,\n        \"version\": null,\n        \"creator\": null\n      }\n\n      // let template1 = {\n      //   \"@context\": {\n      //     \"@vocab\": \"http://xmlns.com/foaf/0.1/\",\n      //     \"homepage\": { \"@type\": \"@id\" },\n      //     \"knows\": { \"@type\": \"@id\" },\n      //     \"based_near\": { \"@type\": \"@id\" }\n      //   },\n      //   \"@id\": \"{@id}\",\n      //   \"name\": null,\n      //   \"type\": null,\n      //   \"description\": null,\n      //   \"version\": null,\n      //   \"creator\": null\n      // }\n      this.thing = template\n      this.thing['@id'] = \"http://local/base/\"+uuidv4()\n\n      let action = this.createParams.array.shift()\n      let params = this.createParams.array\n      console.log(action, params)\n\n      if(params.length == 1 && params[0].split('=')[1] == undefined){\n        this.thing.name = params[0]\n      }else{\n        params.forEach((item, i) => {\n          let splitted = item.split('=')\n          console.log(i,item, splitted)\n          this.thing[splitted[0]] = splitted[1]\n        });\n      }\n      console.log(this.thing)\n\n    },\n    currentNode(){\n      console.log(\"current\", this.currentNode)\n      this.thing = this.currentNode\n      this.$bvModal.show('modal-crudlet')\n    }\n  },\n  computed: {\n    createParams() {\n      return this.$store.state.crud.createParams\n    },\n    currentNode() {\n      return this.$store.state.graph.currentNode\n    },\n  }\n}\n</script>\n\n<style>\n.scroll{\n  max-height: 65vh;\n  /*margin-bottom: 10px;*/\n  overflow-y:scroll;\n  overflow-x:hidden;\n  -webkit-overflow-scrolling: touch;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CrudLet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CrudLet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CrudLet.vue?vue&type=template&id=48465519&\"\nimport script from \"./CrudLet.vue?vue&type=script&lang=js&\"\nexport * from \"./CrudLet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CrudLet.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","undefined","thing","name","length","on","save","onCancel","staticClass","_v","_l","val","k","key","startsWith","_e","_s","Array","isArray","v","i","thingVariant","text","description","model","value","callback","$$v","$set","expression","new_field","add","staticRenderFns","components","data","methods","console","action","start","variant","watch","createParams","params","currentNode","computed","component"],"sourceRoot":""}